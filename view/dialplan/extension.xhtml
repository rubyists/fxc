<?r @extensions.each do |extension| ?>
  <extension name="#{h extension.name}" continue="#{h extension.continue}">
  <?r extension.conditions.each do |condition| ?>
    <condition field="#{h condition.matcher}" expression=#{condition.expression.to_s.dump} #{[:year, :yday, :mon, :mday, :week, :wday, :mweek, :hour, :minute, :minute_of_day].map { |f| %Q{#{f.to_s}="#{h condition[f]}"} if condition[f] }.compact.join(" ")} break="#{h condition.break_string}">
    <?r condition.actions.each do |act| ?>
      <action application="#{h act.application}" data="#{h act.data}" />
    <?r end ?>
    <?r condition.anti_actions.each do |anti_action| ?>
      <anti-action application="#{h anti_action.application}" data="#{h anti_action.data}" />
    <?r end ?>
    </condition>
  <?r end ?>
  </extension>
<?r end ?>
